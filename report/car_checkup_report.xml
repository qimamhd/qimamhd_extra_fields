<?xml version="1.0" encoding="UTF-8"?>
<odoo>

  <template id="checkup_order_report_view_extend" inherit_id="qimamhd_mizan_car_13.checkup_order_report_view">
            <xpath expr="//t[@t-call='web.html_container']" position="replace">
                <t t-call="web.html_container">
 
			    
				<t t-call="web.external_layout">
                    <style>
                            table {
                            border-collapse: collapse;
                            width: 100%;
                            font-size:9px;
                            }
                            #t01 th, td {
                            text-align: left;
                            padding: 3px;
                            font-size:9px;
                            vertical-align: middle;
                            }
                    </style>
                    <style>
                    #customers {
                    border-collapse: collapse;
                    width: 100%;
                    border: 1px solid DarkOrange;
                    
                    overflow:hidden
                    }

                    #supplier {
                    border-collapse: collapse;
                    width: 100%;
                    border: 1px solid DarkOrange;
                    
                    overflow:hidden
                    }

                    #customers td, #customers th {
                    border: 1px solid gray;
                    padding: 5px;
                    text-align: right;
                    }

                    #supplier td, #supplier th {
                    border: 1px solid #D3D3D3;
                    padding: 8px;
                    text-align: right;
                    vertical-align: top;
                    }

                    #customers tr:nth-child(even){background-color: #F5F5F5;}

                    #customers tr:hover {background-color: #ddd;}

                    #customers th {
                    padding-top: 5px;
                    padding-bottom: 5px;
                    text-align: right;
                    
                    
                    }

                    #supplier th {
                    padding-top: 5px;
                    padding-bottom: 5px;
                    text-align: right;
                    
                    }
                    </style>
                    <style>
                    #table1 {
                    border-collapse: collapse;
                    width: 100%;
                    font-size:9px;
                    }

                    #table1 th, #table1 td {
                    padding: 8px;
                    text-align: right;
                    font-size:9px;
                    }
                    </style>
                    <style>
                    #foo {
                    position:absolute;
                    bottom:300px;
                    right:0px;
                    }
                    </style>

					<t t-foreach ="docs" t-as="doc">
						<div class="page">
								<center><strong>تقرير طلب الفحص   / Checkup Order Report</strong></center>
								
								<table  id="table1" style="font-size:11px;">
                                    <tr>
                                        <td style="vertical-align:top;font-size:11px; border-collapse: collapse;">
                                            <table id="table1" class="table table-sm table table-bordered" style="background-color:white;">
                                            <tr style="background-color:white;">
                                            
                                                <td style="vertical-align:top;font-size:11px; border-collapse: collapse;">
                                                    <strong>رقم كرت الدخول </strong>
                                                </td>
                                                <td>
                                                    <span t-esc="docs.entry_card_id.seq"/>
                                                </td>
                                                <td>
                                                    <strong> الحالة </strong>
                                                </td>
                                                <td>

                                                    <t t-if="docs.state == 'draft'">
                                                    مرحلة الاعداد
                                                    </t>
                                                    <t t-else="">
                                                    <t t-if="docs.state == 'work_order_started'">
                                                    مرحلة امر العمل
                                                    </t>
                                                    <t t-else="">
                                                    <t t-if="docs.state == 'execute_started'">
                                                    بدء الفحص
                                                    </t>
                                                    <t t-else="">
                                                    <t t-if="docs.state == 'execute_completed'">
                                                    اكتمال التنفيذ
                                                    </t>

                                                    </t>
                                                    </t>
                                                    </t>
                                                </td>
                                            </tr>
                                            <tr style="background-color:white;">
                                            <td>
                                            <strong> اسم العميل </strong>
                                            </td>
                                            <td>
                                            <span t-esc="docs.partner_id.name"/>
                                            </td>
                                            <td>
                                            <strong> الجوال </strong>
                                            </td>
                                            <td>
                                            <span t-esc="docs.partner_mobile"/>
                                            </td>
                                            </tr>
                                            <tr style="background-color:white;">
                                                  <td>
                                                    <strong> رقم اللوحة  </strong>
                                                </td>
                                                <td>
                                                    <span t-esc="docs.car_panel_no"/>
                                                </td>
                                            <td>
                                                <strong> رقم الشاصي </strong>
                                                </td>
                                                <td>
                                                	<span t-esc="docs.vin_no"/>
                                                </td>


                                            </tr>
                                            </table>
                                    </td>
                                        <td style="vertical-align:top;font-size:11px; border-collapse: collapse;">
                                            <table  id="table1" class="table table-sm table table-bordered" style="background-color:white;">
                                            <tr style="background-color:white;">
                                                <td >
                                                <strong> نوع السيارة </strong>
                                                </td>
                                                <td>
                                                <span t-esc="docs.car_size_id.name" /> - <span t-esc="docs.car_type_id.name"/>
                                                </td>
                                                 <td>
                                                <strong> نوع القير </strong>
                                                </td>
                                                <td>
                                                <span t-esc="docs.entry_card_id.gear_type"/>
                                                </td>
                                           </tr>
                                        <tr style="background-color:white;">
                                                  <td>
                                                    <strong> عداد الطبلون </strong>
                                                </td>
                                                <td>
                                                    <span t-esc="docs.entry_card_id.drum_counter"/>
                                                </td>
                                                <td>
                                                    <strong> الدوبة المصنعة </strong>
                                                </td>
                                                <td>
                                                    <span t-esc="docs.entry_card_id.car_manuf_id.name"/>
                                                </td>
                                        </tr>
                                        <tr style="background-color:white;">
                                                  <td>
                                                <strong> موديل السيارة </strong>
                                                </td>
                                                <td>
                                                <span t-esc="docs.car_model"/>
                                                </td>
                                                <td>
                                                    <strong> الفرع </strong>
                                                </td>
                                                <td>
                                                    <span t-esc="docs.entry_card_id.branch_id.name"/>
                                                </td>
                                        </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>


                                <t t-set="l_line_cnt" t-value="0" />
                                   <t t-set="service_area_id" t-value="[]"/>
                                   <t t-foreach="docs.result_lines" t-as="l">

                                        <t t-set="service_area_id" t-value="service_area_id+[l.checkup_part_id.product_categ_id]"/>

                                   </t>

                                <!-- <t t-foreach="set(service_area_id)" t-as="rec"> -->

                                        <table  id="table1" class="table table-sm table table-bordered" style="background-color:white;">
                                            <thread>
                                                <th class="text-left" style="width: 20%;font-size:9px;">
                                                    نتيجة الفحص
                                                    <!-- <img t-if="rec.area_image" t-att-src="'data:image/png;base64,%s' % to_text(rec.area_image)" style="max-height: 24px;"/>
                                                    <span t-esc="rec.name"/> -->
                                                </th>
                                                <!-- <th class="text-right" style="width: 20%;font-size:9px;"> -->
                                                    <!-- <span t-esc="rec.en_name"/>
                                                    <img t-if="rec.area_image" t-att-src="'data:image/png;base64,%s' % to_text(rec.area_image)" style="max-height: 24px;"/> -->
                                                <!-- </th> -->
                                            </thread>
                                            <tbody class="table table-boardered" style="font-size:9px;">
                                                <t t-foreach ="docs.result_lines" t-as="line">
                                               
                                                    <!-- <t t-if="rec.id==line.checkup_part_id.product_categ_id.id"> -->

                                                        <!-- <t t-if="line.checkup_part_result_id"> -->
                                                            <tr style="background-color:white;font-size:9px;">
                                                            <td  style="background-color:white;font-size:9px;">
                                                                <t t-if="line.name"><span t-esc="line.name"/></t><t t-if="not line.name"><span t-esc="line.checkup_part_id.name"/></t>
 
                                                                <span t-esc="', '.join(str(g.checkup_part_result_id.name) for g in line.checkup_part_result_id)"/>

                                                                 </td>
                                                                <!-- <td  style="background-color:white;font-size:9px;">
                                                                    <t t-if="line.checkup_part_id.en_name">
                                                                    <span t-esc="line.checkup_part_id.en_name"/>
                                                                    <span t-esc="', '.join(str(g.checkup_part_result_id.en_name) for g in line.checkup_part_result_id)"/>
                                                                    </t>
                                                                 </td> -->
                                                            </tr>
                                                    <!-- </t> -->
                                                    <!-- </t> -->
                                                </t>
                                            </tbody>
                                        </table>

                          
                                <t t-if="docs.lines_computer">
                                    <table id="table1" class="table table-sm table table-bordered" style="background-color:white;">
                                        <thread>
                                        <th class="text-center" style="width: 10%">الكود</th>
                                        <th class="text-center" style="width: 40%">الوصف بالعربي</th>
                                        <!-- 									<th class="text-center" style="width: 10%">اجمالي المقاسات</th>-->
                                        <th class="text-center" style="width: 40%">Description </th>
                                        </thread>
                                        <tbody>
                                        <t t-foreach ="docs.lines_computer" t-as="line">
                                            <tr>
                                                <td><span t-esc="line.computer_code.name"/></td>
                                                <td><span t-esc="line.desc_ar"/></td>
                                                <td><span t-esc="line.desc_en"/></td>
                                                </tr>
                                        </t>
                                        </tbody>
                                    </table>
                                </t>
<!--                                <t t-if="docs.lines_spare_parts">-->
<!--                                    <table id="table1" class="table table-sm table table-bordered" style="background-color:white;">-->
<!--                                        <thread>-->
<!--                                        <th class="text-center" style="width: 20%">المنتج</th>-->
<!--                                        <th class="text-center" style="width: 20%">الكمية</th>-->
<!--                                        &lt;!&ndash; 									<th class="text-center" style="width: 10%">اجمالي المقاسات</th>&ndash;&gt;-->
<!--                                        <th class="text-center" style="width: 10%">السعر </th>-->
<!--                                        <th class="text-center" style="width: 10%">الإجمالي</th>-->
<!--                                        </thread>-->
<!--                                        <tbody>-->
<!--                                        <t t-foreach ="docs.lines_sales" t-as="line">-->
<!--                                            <tr>-->
<!--                                                <td><span t-esc="line.service_description"/></td>-->
<!--                                                <td><span t-esc="line.qty"/></td>-->
<!--                                                <td><span t-esc="line.unit_price"/></td>-->
<!--                                                <td><span t-esc="line.total"/></td>-->
<!--                                            </tr>-->
<!--                                        </t>-->
<!--                                        </tbody>-->
<!--                                    </table>-->
<!--                                </t>-->
<!--                                <t t-if="doc.body_image">-->
<!--                                    <center>-->
<!--								        <img t-if="doc.body_image" t-att-src="'data:image/png;base64,%s' % to_text(doc.body_image)" style="max-height: 400px;"/>-->
<!--                                    </center>-->
<!--							    </t>-->

                            <table class="table">
                                <tr>
                                    <td>
                                        <strong> اسم العميل </strong> <span> Customer Name </span>
                                    </td>
                                    <td>
                                            --------------------------------
                                    </td>

                                    <td>
                                        <strong> اسم الفني  </strong> <span> Installer Name </span>
                                    </td>
                                    <td>
                                            --------------------------------
                                    </td>

                                    <td>
                                        <strong> اسم الموظف  </strong> <span> Representative  Name </span>
                                    </td>
                                    <td>
                                            --------------------------------
                                    </td>

                                </tr>
                                <tr>
                                    <td>
                                        <strong>التوقيع</strong> <span>Signature</span>
                                    </td>
                                    <td>
                                            --------------------------------
                                    </td>

                                    <td>
                                        <strong> التوقيع </strong> <span>Signature</span>
                                    </td>
                                    <td>
                                            --------------------------------
                                    </td>

                                    <td>
                                        <strong> التوقيع </strong> <span>Signature</span>
                                    </td>
                                    <td>
                                            --------------------------------
                                    </td>

                                </tr>
                            </table>
						</div>
					</t>
				</t>
				</t>
                </xpath>
	</template>

 
</odoo>
